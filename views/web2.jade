extends header_t.jade

block bcontent
  h1.cover-heading Detecting Libraries in Android Apps.
  p.lead
    | Upload your app (.apk), LibRadar will tell how many libraries are used in the Android app in only several seconds.
  p.lead
  div#inputer_div
    script(type='text/javascript').
      function on_file_change() {
        /*
        var path = document.getElementById("inputer").value;
        var depth = path.split('\\').length;
        var filename = path.split('\\')[depth-1];
        var file_depth = filename.split('.').length;
        var typename = filename.split('.')[file_depth-1];
        if (typename != "apk") {
          document.getElementById("control-label").textContent = "Warning: Not an apk file.";
          document.getElementById("inputer_div").className='has-warning'
          document.getElementById("up_btn").className='btn btn-warning'
        } else {
          document.getElementById("control-label").textContent = "You are going to upload an apk file.";
          document.getElementById("inputer_div").className='has-success'
          document.getElementById("up_btn").className='btn btn-success'
        }*/
      }
    label.control-label#control-label
    p APK File:
    span.btn.btn-success
      i.glyphicon.glyphicon-plus
      span Add files...
      input#fileupload(type="file", name="inputFile", data-url="/file/uploading2",onchange='on_file_change()')
    input.btn.btn-primary#up_btn(name='btnUp',value='Upload')
    div#progress
      div.bar(style="width: 0%")
    script(src='/javascripts/vendor/jquery.ui.widget.js')
    script(src='/javascripts/jquery.iframe-transport.js')
    script(src='/javascripts/jquery.fileupload.js')
    script(type='text/javascript').
      $(function () {
                $('#fileupload').fileupload(
                        {
                          dataType: 'html',
                          done: function (e, data) {
                            document.getElementById('inner_content').innerHTML = data.result;
                            $(".pop").popover({placement:'left', trigger:'manual', delay: {show: 100, hide: 100}, html: true,
                              title: function () {
                                return $("#data-original-title").html();
                              },
                              content: function () {
                                return $("#data-content").html();
                              }});
                            $(function () { $("[data-toggle='tooltip']").tooltip(); });
                            $(".pop").click(function (event){
                              $('.pop').popover('hide');
                              $(this).popover('toggle');
                            });
                            $('body').click(function (event) {
                              var target = $(event.target); // One jQuery object instead of 3
                                        // Compare length with an integer rather than with
                              if (!target.hasClass('popover')
                                      && !target.hasClass('pop')
                                      && !target.hasClass('popover-content')
                                      && !target.hasClass('popover-title')
                                      && !target.hasClass('arrow')) {
                                $('.pop').popover('hide');
                              }
                            });
                          },
                          add: function (e, data) {
                            console.log('ADD:');
                            console.log(data);
                            $('#up_btn')
                                    .click(function () {
                                      //data.context = $('<p/>').text('Uploading...').replaceAll($(this));
                                      data.submit();
                                    });
                          },
                          progressall: function (e, data) {
                            var progress = parseInt(data.loaded / data.total * 100, 10);
                            $('#progress .bar').css(
                                    'width',
                                    progress + '%'
                            );
                          }
                        });
              }
      );